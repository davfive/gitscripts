[include]
    path = ~/gitscripts/gitconfig/gitconfig-setdefault-sh

# Session-level overrides: set GITSCRIPTS_SHELL in the shell that invokes git.
[includeIf "env:GITSCRIPTS_SHELL=pwsh"]
    path = ~/gitscripts/gitconfig/gitconfig-setdefault-pwsh
[includeIf "env:GITSCRIPTS_SHELL=cmd"]
    path = ~/gitscripts/gitconfig/gitconfig-setdefault-cmd

# Windows-specific fragments (optional)
[includeIf "env:OS=Windows_NT"]
    path = ~/gitscripts/gitconfig/gitconfig-setdefault-windows
[includeIf "env:GITSCRIPTS_SHELL=pwsh && env:OS=Windows_NT"]
    path = ~/gitscripts/gitconfig/gitconfig-setdefault-windows-pwsh

[alias]
  # explicit, deterministic runners (centralized so they exist in every session)
  gs-bash = !sh -c 'repo_root=$(git rev-parse --show-toplevel 2>/dev/null) || { echo "Not a git repo" >&2; exit 2; }; "$repo_root/gitscripts/runners/gitscripts.sh" "$@"' -
  gs-pwsh = !pwsh -NoProfile -ExecutionPolicy Bypass -Command 'repo_root=(git rev-parse --show-toplevel 2>$null).Trim(); & \"$repo_root\\gitscripts\\runners\\gitscripts.ps1\" $args' --
  gs-cmd = !cmd /c "for /f \"delims=\" %%R in ('git rev-parse --show-toplevel 2^>nul') do set repo=%%R & \"%repo%\\gitscripts\\runners\\gitscripts.cmd\" %*"